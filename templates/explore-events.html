<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore Events</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/explore-events.css">
</head>
<body>

  <div class="container">

    <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4 mb-3">
      <a type="button" class="btn btn-secondary btn-sm btn-lg me-md-2" href="/{{user.id}}/home">Exit ></a>
    </div>

    <div class="d-flex justify-content-between align-items-center " >
      <div style="display: flex;align-items: center;">
        <h2 class="display-5 fw-bold text-body-emphasis" style="line-height: 40px;">{{event.title}}</h2>
      </div>
      <div class="d-grid gap-2 d-md-flex justify-content-md-start btn-group" role="group">
        {%if event.organizerId==user.id%}
        <a type="button" class="btn btn-warning btn-sm btn-lg me-md">Update</a>
        <a type="button" class="btn btn-danger btn-sm btn-lg me-md" href="/{{user.id}}/{{event.id}}/delete">Delete</a>
        {%endif%}
        
      </div>
    </div>
    
    <div class="row flex-lg-row-reverse  g-2 py-2">
      <div class="col-10 col-sm-6 col-lg-4">
        <img src="/static/voteThumbnail.jpg" class="d-block mx-lg-auto img-fluid" alt="Bootstrap Themes" width="700" height="400" loading="lazy">
      </div>
      <div class="col-lg-8">
          <small style=" color: #0a694b; font-weight: 700;font-size: xx-large;" id="timer"></small>
          <p class="fw-bold text-body-emphasis" style="font-size:large;" id="datetime">Date : {{event.startTime}} <br> Time : 12:22 AM <br> Duration : {%if event.durHour%}{{event.durHour}} hours {%else%}{{event.durMin}} minutes {%endif%} </p>
          <p id="dur" style="display:none;">{%if event.durHour%}{{event.durHour}} hours{%else%}{{event.durMin}} minutes{%endif%}</p>
          <p class="lead">{{event.desc}}</p>
      </div>
    </div>
    {%for v in vote%}
    {%if v.userId==user.id and v.role=="candidate"%}
    <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-5 mb-5" id="r-cand"">
      {%if v.role=='candidate'%}
      {%if v.candidature==-1%}
      <a type="button" class="btn btn-primary btn-lg px-4 me-md-2" href="/{{user.id}}/{{event.id}}/register">Register as a Candidate</a>
      {%else%}
      <button class="btn btn-success">Successfully Registered</button>
      {%endif%}
      {%endif%}      
    </div>
    {%endif%}
    {%endfor%}

    <div>
      <h3 style="font-weight: 700;">Candidates Details</h3>
    </div>
    <div class="album py-2 bg-body">
      <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-5">
          {%for v in vote%}
         <!-- for loop start -->
            {%if v.role=="candidate" and v.candidature>=0%}
              {%for c in cand%}
                {%if v.userId==c.id%}
                  <div class="col">
                    <div class="card shadow-sm">
                      <img src="/static/candidate_default.png" alt="">
                      <div class="card-body">
                        <h5 style="font-weight: 700;">{{c.name}}</h5>
                        <button  class="btn btn-secondary btn-sm" data-bs-toggle="collapse" data-bs-target="#demo{{loop.index}}">Ambition</button>
                        <div id="demo{{loop.index}}" class="collapse">
                          <p class="card-text">{{v.motive}}</p>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center" >
                          <small class="text-body-secondary">{{v.branch}}</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  {%endif%}
                {%endfor%}
          <!-- for loop end -->
           {%endif%}
          {%endfor%}
          
        </div>
      </div>  
    </div>




    <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-5 mb-5">
      <button type="button" class="btn btn-primary btn-lg px-4 me-md-2" id="Vote Button">Vote</button>
    </div>

  </div>



  <script src="/static/explore-events.js"></script>
</body>
</html>